
name: sourcepoint_unified_cmp

packages:
  - packages/*
  - packages/*/example

sdkPath: .fvm/flutter_sdk

command:
  clean:
    hooks:
      # Runs "flutter clean" in all Flutter packages (`--flutter`)
      # with a concurrency of 3 at a time (`--concurrency=3`).
      post: melos exec --flutter --concurrency=3 -- "fvm flutter clean"
  version:
    # Generate commit links in package changelogs.
    #linkToCommits: true
    # # Only allow versioning to happen on main branch.
    # branch: master
    # Additionally build a changelog at the root of the workspace.
    workspaceChangelog: true
    
scripts:
  analyze:
    exec: fvm flutter analyze .

  pana:
    exec: fvm exec pana . --no-warning

  format:
    run: |
      fvm dart pub global run flutter_plugin_tools format && \
      swiftformat .
    description: |
       - Requires `swiftformat` (can be installed via Brew on macOS).

  generate:pigeon:
    run: |
      melos exec -- "fvm flutter pub run pigeon --input ./pigeons/messages.dart" && \
      melos run format --no-select
    packageFilters:
      fileExists: 'pigeons/messages.dart'
    description: Generate the pigeon messages for all the supported packages.
